---
layout:     post
title:      "编译课笔记01"
subtitle:  文法与规则
date:       2022-09-01
author:     Leo
header-img: "img/post-compile.jpg"
catalog: true
tags: ["Compile@Tpags@Tags", "编译技术@Courses@Series"]
lang: zh
katex: true
---

# 文法与规则


## 非形式语言讨论

较为平常、口语、通俗的口吻。

**文法定义**：对语言结构的定义与描述。也可以称为文法。如“他是好人”，其语法结构为主谓结构，这是由语法所决定的。

**语法规则**：通过建立一组规则，描述句子的语法结构。通过$::=$ or $\rightarrow $ 表示 由 …… 组成

如上述的主谓结构可以如下表述

$$
<句子> ::= <主语><谓语>\\
<主语> ::= <代词>|<名词>\\ 
<代词> ::= 你|我|他\\
<名词> ::= 好人|坏人|大学生|英语\\
<谓语> ::= <动词><直接宾语>\\
<动词> ::= 是|学习
<直接宾语> ::= <代词>|<名词>
$$

**由规则推导句子**：通过规则推导或者产生句子，具体方式为从可识别的符号开始，用相应规则的右部替代左部

$$
<句子> \Rightarrow <主语><谓语> \\
<主语><谓语> \Rightarrow <代词><谓语>(由‘或’连接的选一个即可)\\
\dots
$$

直到$<>$都被替代掉，这可以组成为 一个句子。将不含$<>$的符号称为**终止符号**

显然这样的推导是机械的替换，因此尽管**语法上**正确，但是**语义上**不一定正确，**文法只管形式上的事情**

上述的方法，我们总是从最左的语法，将左部有一次替换掉，这样的推导称为**最早推导

**语法（推导）树**：上述的组成方式，类似于表达式那样的递归组成，自然可以用树的形式进行表达。这样的树中，根结点称为**识别符号**，中间节点称为**语法成分**或者**非终结符**，叶子节点称为**单词符号**或者**终结符号**。

## 形式化表达

用数学的、严禁的语言再来规定一下。

### 文法定义

文法$G[Z]=(V_n, V_t, P, Z)$, 其中

$$
\begin{align*}
& V_n:\textsf{非终结符号表}\\
&V_t:\textsf{终结符号表} \\
&P:\textsf{产生式或规则的集合}\\
&Z:\textsf{开始符号} \\
\textsf{此外还有以下约定}\\
& V = V_n \cup V_t:\textsf{文法的字汇表} \\
& \textsf{规则}：U ::=x, \quad U \in V_n, x \in V^*
\end{align*}
$$

规则本质上就是一个满足限制条件的有序对。

以无符号整数的文法为例

$$
\begin{align*}
& G[<无符号整数>] = (V_n, V_t, P, Z) \\
& V_n = \{<无符号整数>, <数字串>, <数字>\} \\
& P = \{<无符号整数> \rightarrow <数字串>,\\
& \qquad <数字串> \rightarrow <数字串><数字>\\
& \qquad <数字串> \rightarrow <数字>\\
& \qquad <数字> \rightarrow 0 \\
& \qquad <数字> \rightarrow 1 \\
& \qquad  \qquad \dotsb \dotsb \\
& \qquad <数字> \rightarrow 9 \\
& \qquad \}
\\& Z = <无符号整数>\\
\end{align*}
$$

从上述可以看出，$V_n$中的元素都是在产生式的左部，且 $ Z \in V_n$中，此外，当左部一样时，可以用$|$合并在一起，称为**文法的BNF表示**

###  推导的形式定义

$$
\begin{align*}
&\textsf{文法}G: v = xUy, \quad w = xuy \\
& \textsf{其中}x,y \in V^*， U \in V_n, u \in V^* \\
&若U::=u \in P, 则v \underset{G}{\Rightarrow}w\\
&若x=y=\epsilon, 有U::=u, 则U \underset{G}{\Rightarrow}u
\end{align*}
$$
这个G也可以用规则来表示。当符号串没有终结符号时，推导终止

![image.png](https://pic7.58cdn.com.cn/nowater/webim/big/n_v25d6efb11926648f19451ef5c4e5928c4.png)